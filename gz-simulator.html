<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">


<dom-module id="gz-simulator">

  <template>
    <style>
      :host {
        display: block;
      }
      #config {
        border: 1px solid black;
      }
    </style>

    <div id="config" hidden$=[[!config]]>
      <iron-ajax
        id='ajax'
        method='GET'
        handle-as='document'
        url='/keys.zip'
      ></iron-ajax>
      <div>
        Sim server URL:<input id=simurl value="{{url::input}}"></input>
      </div>
      <div>
        Token:<input id=token value="{{token::input}}"></input>
      </div>
      <form method="get" action="keys.zip">
        <button type="submit">Download keys</button>
      </form>
      <div>
        <button type='button' on-tap='tapDownload'>Download keys js</button>
      </div>
      <a href={{url}}/keys.zip target="_blank">Download keys</a>
    </div>
  </template>

  <script>
    Polymer({

      is: 'gz-simulator',
      attached: function() {
        console.log('gz-simulator attached (id = ' + this.id + ')')
      },

      tapDownload: function()  {
        // Download file
        console.log("DOWNLOAD KEYS " + this.$.ajax.url)
          this.$.ajax.params = {}
          this.$.ajax.generateRequest()
      },

      properties: {
        url: {
          type: String,
          value: 'the url of the sim server',
        },

        token: {
          type: String,
          value:'',
        },

        config: {
          type: Boolean,
          value: false
        }

      },

    });
  </script>
</dom-module>
